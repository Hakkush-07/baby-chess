<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
        <meta name="theme-color" content="#dbd7d1">
        <title>{{ title }} • lichess.org</title>
        <link href="https://lichess1.org/assets/_Iis238/css/site.light.min.css" rel="stylesheet" />
        <link href="https://lichess1.org/assets/_Iis238/css/round.zh.light.min.css" rel="stylesheet" />
        <link id="piece-sprite" href="https://lichess1.org/assets/_Iis238/piece-css/cburnett.css" rel="stylesheet" />
        <meta content="Free online chess server. Play chess in a clean interface. No registration, no ads, no plugin required. Play chess with the computer, friends or random opponents." name="description">
        <link rel="mask-icon" href="https://lichess1.org/assets/_Iis238/logo/lichess.svg" style="color: black;" />
        <link rel="icon" type="image/png" href="https://lichess1.org/assets/_49LH4M/logo/lichess-favicon-512.png" sizes="512x512">
        <link rel="icon" type="image/png" href="https://lichess1.org/assets/_49LH4M/logo/lichess-favicon-256.png" sizes="256x256">
        <link rel="icon" type="image/png" href="https://lichess1.org/assets/_49LH4M/logo/lichess-favicon-192.png" sizes="192x192">
        <link rel="icon" type="image/png" href="https://lichess1.org/assets/_49LH4M/logo/lichess-favicon-128.png" sizes="128x128">
        <link rel="icon" type="image/png" href="https://lichess1.org/assets/_49LH4M/logo/lichess-favicon-64.png" sizes="64x64">
        <link id="favicon" rel="icon" type="image/png" href="https://lichess1.org/assets/_49LH4M/logo/lichess-favicon-32.png" sizes="32x32">
    </head>
    <body class="light blue Woodi Basic coords-in" data-vapid="BGr5CL0QlEYa7qW7HLqe7DFkCeTsYMLsi1Db+5Vwt1QBIs6+WxN8066AjtP8S9u+w+CbleE8xWY+qQaNEMs7sAs=" data-sound-set="standard" data-socket-domains="socket0.lichess.org,socket1.lichess.org,socket2.lichess.org,socket3.lichess.org,socket4.lichess.org,socket5.lichess.org" data-asset-url="https://lichess1.org" data-asset-version="Iis238" data-theme="light" data-piece-set="cburnett" style="--zoom:85">
        <header id="top">
            <div class="site-title-nav">
                <h1 class="site-title"><a href="/">libaby<span>.org</span></a></h1>
                <nav id="topnav" class="hover">
                    <section>
                        <a href="/analysis">Example</a>
                        <div role="group"><a href="/analysis">Analysis board</a><a href="/editor">Board editor</a><a href="/paste">Import game</a><a href="/games/search">Advanced search</a></div>
                    </section>
                </nav>
            </div>
            <div class="site-buttons">
                <div id="clinput"><a class="link" href="/search"><span data-icon=""></span></a><input spellcheck="false" autocomplete="false" aria-label="Search" placeholder="Search" /></div>
                <div class="dasher">
                    <a class="toggle link anon" href="/settings"><span title="Preferences" data-icon=""></span></a>
                </div>
                {% if current_user.is_authenticated %}
                <a id="username" href="/profile" class="signin button button-empty">{{ current_user.username }}</a>
                {% else %}
                <a href="/login" class="signin button button-empty">Log in</a>
                {% endif %}
            </div>
        </header>
        <div id="main-wrap" class="is2d">
            <main class="round">
                <aside class="round__side">
                    <div class="game__meta">
                        <section>
                            <div class="game__meta__infos" data-icon="">
                                <div class="header" style="display: grid; grid-template-columns: repeat(2, 120px); grid-gap: 6px 30px; font-size: 14px">
                                    <div class="setup">{{ game.time_main }} + {{ game.time_increment }} • Baby Chess</div>
                                    <form method="post" action="/quit/{{ game.key }}">
                                        <button type="submit" class="submit button">Quit</button>
                                    </form>
                                </div>
                            </div>
                            <div class="game__meta__players" style="display: grid; grid-template-columns: repeat(2, 100px); grid-gap: 6px 50px; font-size: 16px">
                                {% for player in game.players %}
                                <div class="player color-icon is white text">{{ player.username }}</div>
                                {% endfor %}
                                {% for i in range(4 - game.count_players()) %}
                                <div class="player color-icon is white text">...waiting...</div>
                                {% endfor %}
                            </div>
                        </section>
                    </div>
                    <section class="mchat mchat-optional">
                        <div class="mchat__tabs nb_1">
                            <div class="mchat__tab discussion mchat__tab-active">
                              <span>Chat</span>
                            </div>
                        </div>
                        <div class="mchat__content discussion">
                            <ol id="messages" class="mchat__messages chat-v-1" role="log" aria-live="polite" aria-atomic="false"></ol>
                            <input id="chat_send" class="mchat__say" placeholder="Please be nice">
                            <button onclick="send_msg()" type="submit">Send</button>
                        </div>
                    </section>
                </aside>
                <div class="round__app">
                    <div class="round__app__board main-board">
                        <div class="cg-wrap orientation-white">
                            <cg-container id="board">
                                <cg-board>
                                    <square class="last-move" style="top:62.5%;left:62.5%"></square>
                                    <square class="last-move" style="top:50.0%;left:50.0%"></square>
                                    <piece class="white rook" style="top:87.5%;left:0.0%"></piece>
                                    <piece class="white pawn" style="top:75.0%;left:75.0%"></piece>
                                    <piece class="white knight" style="top:50.0%;left:62.5%"></piece>
                                    <piece class="black rook" style="top:0.0%;left:62.5%"></piece>
                                    <piece class="white king" style="top:87.5%;left:75.0%"></piece>
                                    <piece class="white pawn" style="top:50.0%;left:50.0%"></piece>
                                    <piece class="white pawn" style="top:75.0%;left:62.5%"></piece>
                                    <piece class="black pawn" style="top:25.0%;left:62.5%"></piece>
                                    <piece class="black pawn" style="top:25.0%;left:50.0%"></piece>
                                    <piece class="black pawn" style="top:12.5%;left:75.0%"></piece>
                                    <piece class="black pawn" style="top:37.5%;left:37.5%"></piece>
                                    <piece class="black pawn" style="top:12.5%;left:0.0%"></piece>
                                    <piece class="white bishop" style="top:75.0%;left:37.5%"></piece>
                                    <piece class="white pawn" style="top:75.0%;left:0.0%"></piece>
                                    <piece class="white rook" style="top:87.5%;left:50.0%"></piece>
                                    <piece class="white queen" style="top:75.0%;left:25.0%"></piece>
                                    <piece class="black rook" style="top:0.0%;left:0.0%"></piece>
                                    <piece class="white pawn" style="top:75.0%;left:12.5%"></piece>
                                    <piece class="black pawn" style="top:12.5%;left:62.5%"></piece>
                                    <piece class="black knight" style="top:50.0%;left:25.0%"></piece>
                                    <piece class="black pawn" style="top:12.5%;left:87.5%"></piece>
                                    <piece class="white pawn" style="top:75.0%;left:87.5%"></piece>
                                    <piece class="black king" style="top:0.0%;left:75.0%"></piece>
                                </cg-board>
                                <coords class="ranks">
                                    <coord>1</coord>
                                    <coord>2</coord>
                                    <coord>3</coord>
                                    <coord>4</coord>
                                    <coord>5</coord>
                                    <coord>6</coord>
                                    <coord>7</coord>
                                    <coord>8</coord>
                                </coords>
                                <coords class="files">
                                    <coord>a</coord>
                                    <coord>b</coord>
                                    <coord>c</coord>
                                    <coord>d</coord>
                                    <coord>e</coord>
                                    <coord>f</coord>
                                    <coord>g</coord>
                                    <coord>h</coord>
                                </coords>
                            </cg-container>
                        </div>
                    </div>
                    <div id="pocket-main-top" class="pocket is2d pocket-top">
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="pawn black" data-role="pawn" data-color="black" data-nb="2"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="knight black" data-role="knight" data-color="black" data-nb="0"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="bishop black" data-role="bishop" data-color="black" data-nb="1"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="rook black" data-role="rook" data-color="black" data-nb="0"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="queen black" data-role="queen" data-color="black" data-nb="1"></piece>
                            </div>
                        </div>
                    </div>
                    <div class="round__app__table" style="height: 400px">
                        <div style="height: 10%">
                            <div id="pocket-side-top" class="pocket is2d pocket-top" style="width: 50%; margin: 0 auto;">
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="pawn black" data-role="pawn" data-color="black" data-nb="2"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="knight black" data-role="knight" data-color="black" data-nb="0"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="bishop black" data-role="bishop" data-color="black" data-nb="1"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="rook black" data-role="rook" data-color="black" data-nb="0"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="queen black" data-role="queen" data-color="black" data-nb="1"></piece>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="height: 80%">
                            <div class="round__app__board main-board">
                                <div class="cg-wrap orientation-white">
                                    <cg-container id="board-side" style="width: 80%; height: 80%; top: 0; left: 10%;">
                                        <cg-board>
                                            <square class="last-move" style="top:62.5%;left:62.5%"></square>
                                            <square class="last-move" style="top:50.0%;left:50.0%"></square>
                                            <piece class="white rook" style="top:87.5%;left:0.0%"></piece>
                                            <piece class="white pawn" style="top:75.0%;left:75.0%"></piece>
                                            <piece class="white knight" style="top:50.0%;left:62.5%"></piece>
                                            <piece class="black rook" style="top:0.0%;left:62.5%"></piece>
                                            <piece class="white king" style="top:87.5%;left:75.0%"></piece>
                                            <piece class="white pawn" style="top:50.0%;left:50.0%"></piece>
                                            <piece class="white pawn" style="top:75.0%;left:62.5%"></piece>
                                            <piece class="black pawn" style="top:25.0%;left:62.5%"></piece>
                                            <piece class="black pawn" style="top:25.0%;left:50.0%"></piece>
                                            <piece class="black pawn" style="top:12.5%;left:75.0%"></piece>
                                            <piece class="black pawn" style="top:37.5%;left:37.5%"></piece>
                                            <piece class="black pawn" style="top:12.5%;left:0.0%"></piece>
                                            <piece class="white bishop" style="top:75.0%;left:37.5%"></piece>
                                            <piece class="white pawn" style="top:75.0%;left:0.0%"></piece>
                                            <piece class="white rook" style="top:87.5%;left:50.0%"></piece>
                                            <piece class="white queen" style="top:75.0%;left:25.0%"></piece>
                                            <piece class="black rook" style="top:0.0%;left:0.0%"></piece>
                                            <piece class="white pawn" style="top:75.0%;left:12.5%"></piece>
                                            <piece class="black pawn" style="top:12.5%;left:62.5%"></piece>
                                            <piece class="black knight" style="top:50.0%;left:25.0%"></piece>
                                            <piece class="black pawn" style="top:12.5%;left:87.5%"></piece>
                                            <piece class="white pawn" style="top:75.0%;left:87.5%"></piece>
                                            <piece class="black king" style="top:0.0%;left:75.0%"></piece>
                                        </cg-board>
                                        <coords class="ranks">
                                            <coord>1</coord>
                                            <coord>2</coord>
                                            <coord>3</coord>
                                            <coord>4</coord>
                                            <coord>5</coord>
                                            <coord>6</coord>
                                            <coord>7</coord>
                                            <coord>8</coord>
                                        </coords>
                                        <coords class="files">
                                            <coord>a</coord>
                                            <coord>b</coord>
                                            <coord>c</coord>
                                            <coord>d</coord>
                                            <coord>e</coord>
                                            <coord>f</coord>
                                            <coord>g</coord>
                                            <coord>h</coord>
                                        </coords>
                                    </cg-container>
                                </div>
                            </div>
                        </div>
                        <div style="height: 10%">
                            <div id="pocket-side-bottom" class="pocket is2d pocket-bottom" style="width: 50%; margin: 0 auto;">
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="pawn white" data-role="pawn" data-color="white" data-nb="1"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="knight white" data-role="knight" data-color="white" data-nb="2"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="bishop white" data-role="bishop" data-color="white" data-nb="2"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="rook white" data-role="rook" data-color="white" data-nb="0"></piece>
                                    </div>
                                </div>
                                <div class="pocket-c1">
                                    <div class="pocket-c2">
                                        <piece class="queen white" data-role="queen" data-color="white" data-nb="0"></piece>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="pocket-main-bottom" class="pocket is2d pocket-bottom">
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="pawn white" data-role="pawn" data-color="white" data-nb="1"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="knight white" data-role="knight" data-color="white" data-nb="2"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="bishop white" data-role="bishop" data-color="white" data-nb="2"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="rook white" data-role="rook" data-color="white" data-nb="0"></piece>
                            </div>
                        </div>
                        <div class="pocket-c1">
                            <div class="pocket-c2">
                                <piece class="queen white" data-role="queen" data-color="white" data-nb="0"></piece>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="round__underboard"></div>
                <div class="round__underchat"></div>
            </main>
        </div>
<!--        good js but it changes chat box-->
<!--        <script nonce="gdVC62d7JvD6NmtXQcvQxinv">lichess={load:new Promise(r=>{window.onload=r}),quantity:function(c) {return c == 1 ? 'one' : 'other';}};lichess.timeagoLocale=function(s,n){return[["just now","right now"],["%s seconds ago","in %s seconds"],["1 minute ago","in 1 minute"],["%s minutes ago","in %s minutes"],["1 hour ago","in 1 hour"],["%s hours ago","in %s hours"],["1 day ago","in 1 day"],["%s days ago","in %s days"],["1 week ago","in 1 week"],["%s weeks ago","in %s weeks"],["1 month ago","in 1 month"],["%s months ago","in %s months"],["1 year ago","in 1 year"],["%s years ago","in %s years"]][n]};</script><script defer="defer" src="https://lichess1.org/assets/_sJQ0hX/compiled/lichess.min.js"></script><script defer="defer" src="https://lichess1.org/assets/_sJQ0hX/compiled/round.min.js"></script><script nonce="gdVC62d7JvD6NmtXQcvQxinv">lichess.load.then(()=>{LichessRound.boot({"data":{"game":{"id":"qBeh8283","variant":{"key":"crazyhouse","name":"Crazyhouse","short":"Crazy"},"speed":"blitz","perf":"crazyhouse","rated":true,"fen":"r3kbnr/ppp3pp/4pp2/1q1pNb1b/3P1B2/4PN2/PPPN1PPP/R2QK2R/ w KQkq - 2 9","player":"white","turns":16,"startedAtTurn":0,"source":"lobby","status":{"id":20,"name":"started"},"createdAt":1632141147979,"lastMove":"BishopBishop","opening":{"eco":"D00","name":"Queen\u0027s Pawn Game: Mason Variation","ply":3}},"clock":{"running":true,"initial":300,"increment":3,"white":285.10,"black":281.27,"emerg":37,"moretime":15},"correspondence":null,"player":{"color":"black","name":null,"user":{"id":"unjournakamura","username":"unjournakamura","online":true,"perfs":{"crazyhouse":{"games":33148,"rating":2416,"rd":45,"prog":15}},"profile":{"country":"FI"}},"rating":2416,"version":16,"spectator":true,"id":null,"onGame":true},"opponent":{"color":"white","name":null,"user":{"id":"chabochab","username":"chabochab","online":true,"perfs":{"crazyhouse":{"games":14462,"rating":2098,"rd":45,"prog":-10}}},"rating":2098,"onGame":true},"orientation":"black","url":{"socket":"/watch/qBeh8283/black/v6","round":"/qBeh8283/black"},"pref":{"animationDuration":300.0,"coords":1,"resizeHandle":1,"replay":2,"clockTenths":1,"clockBar":true,"highlight":true,"destination":true,"rookCastle":true,"showCaptured":true},"evalPut":false,"steps":[{"ply":0,"uci":null,"san":null,"fen":"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR/ w KQkq - 0 1","crazy":{"pockets":[{},{}]}},{"ply":1,"uci":"d2d4","san":"d4","fen":"rnbqkbnr/pppppppp/8/8/3P4/8/PPP1PPPP/RNBQKBNR/ b KQkq - 0 1","crazy":{"pockets":[{},{}]}},{"ply":2,"uci":"d7d5","san":"d5","fen":"rnbqkbnr/ppp1pppp/8/3p4/3P4/8/PPP1PPPP/RNBQKBNR/ w KQkq - 0 2","crazy":{"pockets":[{},{}]}},{"ply":3,"uci":"c1f4","san":"Bf4","fen":"rnbqkbnr/ppp1pppp/8/3p4/3P1B2/8/PPP1PPPP/RN1QKBNR/ b KQkq - 1 2","crazy":{"pockets":[{},{}]}},{"ply":4,"uci":"c8f5","san":"Bf5","fen":"rn1qkbnr/ppp1pppp/8/3p1b2/3P1B2/8/PPP1PPPP/RN1QKBNR/ w KQkq - 2 3","crazy":{"pockets":[{},{}]}},{"ply":5,"uci":"e2e3","san":"e3","fen":"rn1qkbnr/ppp1pppp/8/3p1b2/3P1B2/4P3/PPP2PPP/RN1QKBNR/ b KQkq - 0 3","crazy":{"pockets":[{},{}]}},{"ply":6,"uci":"e7e6","san":"e6","fen":"rn1qkbnr/ppp2ppp/4p3/3p1b2/3P1B2/4P3/PPP2PPP/RN1QKBNR/ w KQkq - 0 4","crazy":{"pockets":[{},{}]}},{"ply":7,"uci":"f1b5","san":"Bb5+","fen":"rn1qkbnr/ppp2ppp/4p3/1B1p1b2/3P1B2/4P3/PPP2PPP/RN1QK1NR/ b KQkq - 1 4","check":true,"crazy":{"pockets":[{},{}]}},{"ply":8,"uci":"b8d7","san":"Nd7","fen":"r2qkbnr/pppn1ppp/4p3/1B1p1b2/3P1B2/4P3/PPP2PPP/RN1QK1NR/ w KQkq - 2 5","crazy":{"pockets":[{},{}]}},{"ply":9,"uci":"b5d7","san":"Bxd7+","fen":"r2qkbnr/pppB1ppp/4p3/3p1b2/3P1B2/4P3/PPP2PPP/RN1QK1NR/N b KQkq - 0 5","check":true,"crazy":{"pockets":[{"knight":1},{}]}},{"ply":10,"uci":"d8d7","san":"Qxd7","fen":"r3kbnr/pppq1ppp/4p3/3p1b2/3P1B2/4P3/PPP2PPP/RN1QK1NR/Nb w KQkq - 0 6","crazy":{"pockets":[{"knight":1},{"bishop":1}]}},{"ply":11,"uci":"N@e5","san":"N@e5","fen":"r3kbnr/pppq1ppp/4p3/3pNb2/3P1B2/4P3/PPP2PPP/RN1QK1NR/b b KQkq - 1 6","crazy":{"pockets":[{},{"bishop":1}]}},{"ply":12,"uci":"d7b5","san":"Qb5","fen":"r3kbnr/ppp2ppp/4p3/1q1pNb2/3P1B2/4P3/PPP2PPP/RN1QK1NR/b w KQkq - 2 7","crazy":{"pockets":[{},{"bishop":1}]}},{"ply":13,"uci":"b1d2","san":"Nd2","fen":"r3kbnr/ppp2ppp/4p3/1q1pNb2/3P1B2/4P3/PPPN1PPP/R2QK1NR/b b KQkq - 3 7","crazy":{"pockets":[{},{"bishop":1}]}},{"ply":14,"uci":"f7f6","san":"f6","fen":"r3kbnr/ppp3pp/4pp2/1q1pNb2/3P1B2/4P3/PPPN1PPP/R2QK1NR/b w KQkq - 0 8","crazy":{"pockets":[{},{"bishop":1}]}},{"ply":15,"uci":"g1f3","san":"Ngf3","fen":"r3kbnr/ppp3pp/4pp2/1q1pNb2/3P1B2/4PN2/PPPN1PPP/R2QK2R/b b KQkq - 1 8","crazy":{"pockets":[{},{"bishop":1}]}},{"ply":16,"uci":"B@h5","san":"B@h5","fen":"r3kbnr/ppp3pp/4pp2/1q1pNb1b/3P1B2/4PN2/PPPN1PPP/R2QK2R/ w KQkq - 2 9","crazy":{"pockets":[{},{}]}}]},"i18n":{"anonymous":"Anonymous","flipBoard":"Flip board","aiNameLevelAiLevel":"%1$s level %2$s","yourTurn":"Your turn","abortGame":"Abort game","proposeATakeback":"Propose a takeback","offerDraw":"Offer draw","resign":"Resign","opponentLeftCounter:one":"Your opponent left the game. You can claim victory in %s second.","opponentLeftCounter":"Your opponent left the game. You can claim victory in %s seconds.","opponentLeftChoices":"Your opponent left the game. You can claim victory, call the game a draw, or wait.","forceResignation":"Claim victory","forceDraw":"Call draw","threefoldRepetition":"Threefold repetition","claimADraw":"Claim a draw","drawOfferSent":"Draw offer sent","cancel":"Cancel","yourOpponentOffersADraw":"Your opponent offers a draw","accept":"Accept","decline":"Decline","takebackPropositionSent":"Takeback sent","yourOpponentProposesATakeback":"Your opponent proposes a takeback","thisAccountViolatedTos":"This account violated the Lichess Terms of Service","gameAborted":"Game aborted","checkmate":"Checkmate","whiteResigned":"White resigned","blackResigned":"Black resigned","whiteDidntMove":"White didn\u0027t move","blackDidntMove":"Black didn\u0027t move","stalemate":"Stalemate","whiteLeftTheGame":"White left the game","blackLeftTheGame":"Black left the game","draw":"Draw","whiteTimeOut":"White time out","blackTimeOut":"Black time out","whiteIsVictorious":"White is victorious","blackIsVictorious":"Black is victorious","drawByMutualAgreement":"Draw by mutual agreement","fiftyMovesWithoutProgress":"Fifty moves without progress","insufficientMaterial":"Insufficient material","withdraw":"Withdraw","rematch":"Rematch","rematchOfferSent":"Rematch offer sent","rematchOfferAccepted":"Rematch offer accepted","waitingForOpponent":"Waiting for opponent","cancelRematchOffer":"Cancel rematch offer","newOpponent":"New opponent","confirmMove":"Confirm move","viewRematch":"View rematch","whitePlays":"White to play","blackPlays":"Black to play","giveNbSeconds:one":"Give %s second","giveNbSeconds":"Give %s seconds","giveMoreTime":"Give more time","gameOver":"Game Over","analysis":"Analysis board","yourOpponentWantsToPlayANewGameWithYou":"Your opponent wants to play a new game with you","youPlayTheWhitePieces":"You play the white pieces","youPlayTheBlackPieces":"You play the black pieces","itsYourTurn":"It\u0027s your turn!","nbSecondsToPlayTheFirstMove:one":"%s second to play the first move","nbSecondsToPlayTheFirstMove":"%s seconds to play the first move","kingInTheCenter":"King in the center","threeChecks":"Three checks","variantEnding":"Variant ending"},"chat":{"data":{"id":"qBeh8283/w","name":"Spectator room","lines":[],"userId":null,"resourceId":"game/qBeh8283/w","loginRequired":true},"i18n":{"talkInChat":"Please be nice in the chat!","toggleTheChat":"Toggle the chat","loginToChat":"Sign in to chat","youHaveBeenTimedOut":"You have been timed out."},"writeable":true,"public":true,"permissions":{"local":false}}})})</script>-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
        <script type="text/javascript" charset="utf-8">
            var socket = io();
            socket.on("information", function(data) {
                var li = document.createElement("li");
                li.setAttribute("class", "system");
                var system = document.createElement("t");
                system.innerHTML = data.username + " " + data.info;
                system.setAttribute("class", "user-link");
                li.appendChild(system);
                var list = document.getElementById("messages");
                list.insertBefore(li, list.childNodes[0]);
            });
            socket.on("message", function(data) {
                var li = document.createElement("li");
                var author = document.createElement("span");
                author.innerHTML = data.author;
                author.setAttribute("class", "user-link");
                li.appendChild(author);
                var message = document.createElement("span");
                message.innerHTML = data.message;
                li.appendChild(message);
                var list = document.getElementById("messages");
                list.insertBefore(li, list.childNodes[0]);
            });
            socket.on("move", function(data) {
                create_board(data.board_main.pieces, data.board_main.last_move, data.board_main.pockets, data.orientation, "board", "main");
                create_board(data.board_side.pieces, data.board_side.last_move, data.board_side.pockets, 1 - data.orientation, "board-side", "side");
            });
            function create_board(pieces, last_move, pockets, orientation, board_id, pockets_id) {
                var board = document.createElement("cg-board");
                last_move.forEach(function (item) {
                    var square = document.createElement("square");
                    square.setAttribute("class", "last-move");
                    square.setAttribute("style", coordinate(item, orientation));
                    board.appendChild(square);
                });
                pieces.forEach(function (item) {
                    var piece = document.createElement("piece");
                    piece.setAttribute("class", item[0]);
                    piece.setAttribute("style", coordinate(item[1], orientation));
                    board.appendChild(piece);
                });
                var ranks = document.createElement("coords");
                ranks.setAttribute("class", "ranks");
                var rank_array = orientation == 1 ? ["1", "2", "3", "4", "5", "6", "7", "8"] : ["8", "7", "6", "5", "4", "3", "2", "1"];
                rank_array.forEach(function (item) {
                    var rank = document.createElement("coord");
                    rank.innerHTML = item;
                    ranks.appendChild(rank);
                });
                var files = document.createElement("coords");
                files.setAttribute("class", "files");
                var file_array = orientation == 1 ? ["a", "b", "c", "d", "e", "f", "g", "h"] : ["h", "g", "f", "e", "d", "c", "b", "a"];
                file_array.forEach(function (item) {
                    var file = document.createElement("coord");
                    file.innerHTML = item;
                    files.appendChild(file);
                });
                var a = document.getElementById(board_id);
                a.innerHTML = "";
                a.appendChild(board);
                a.appendChild(ranks);
                a.appendChild(files);
                var pocket_top = document.getElementById("pocket-" + pockets_id + "-top");
                var pocket_bottom = document.getElementById("pocket-" + pockets_id + "-bottom");
                pocket_top.innerHTML = "";
                pocket_bottom.innerHTML = "";
                var top_pocket = orientation == 1 ? pockets.black : pockets.white;
                var bottom_pocket = orientation == 1 ? pockets.white : pockets.black;
                top_pocket.forEach(function (item) {
                    var pocket_c1 = document.createElement("coord");
                    pocket_c1.setAttribute("class", "pocket-c1");
                    var pocket_c2 = document.createElement("coord");
                    pocket_c2.setAttribute("class", "pocket-c2");
                    var pocket_piece = document.createElement("piece");
                    pocket_piece.setAttribute("class", item[1] + " " + item[0]);
                    pocket_piece.setAttribute("data-role", item[1]);
                    pocket_piece.setAttribute("data-color", item[0]);
                    pocket_piece.setAttribute("data-nb", "" + item[2]);
                    pocket_c2.appendChild(pocket_piece);
                    pocket_c1.appendChild(pocket_c2);
                    pocket_top.appendChild(pocket_c1);
                });
                bottom_pocket.forEach(function (item) {
                    var pocket_c1 = document.createElement("coord");
                    pocket_c1.setAttribute("class", "pocket-c1");
                    var pocket_c2 = document.createElement("coord");
                    pocket_c2.setAttribute("class", "pocket-c2");
                    var pocket_piece = document.createElement("piece");
                    pocket_piece.setAttribute("class", item[1] + " " + item[0]);
                    pocket_piece.setAttribute("data-role", item[1]);
                    pocket_piece.setAttribute("data-color", item[0]);
                    pocket_piece.setAttribute("data-nb", "" + item[2]);
                    pocket_c2.appendChild(pocket_piece);
                    pocket_c1.appendChild(pocket_c2);
                    pocket_bottom.appendChild(pocket_c1);
                });
            }
            function coordinate(arr, orientation) {
                var i = orientation == 1 ? arr[0] : 9 - arr[0];
                var j = orientation == 1 ? arr[1] : 9 - arr[1];
                return "top:" + (8 - j) * 12.5 + "%;left:" + (i - 1) * 12.5 + "%;";
            }
            function send_msg() {
                var msg = document.getElementById("chat_send").value;
                var author = document.getElementById("username").innerHTML;
                document.getElementById("chat_send").value = "";
                socket.emit("message_sent", {author: author, message: msg});
            }
        </script>
    </body>
</html>